# E-Mailitary 관리자 가이드

## 관리자 로그인

**계정 정보**:
- 이메일: t01021102904@gmail.com
- 비밀번호: admin123
- 로그인 URL: `/auth/login`

로그인 후 헤더에 "Admin" 메뉴가 표시됩니다.

## 관리자 대시보드 기능

### 1. Letters 관리 (`/admin`)

#### 편지 승인/거부
- **Pending 편지 목록**: 검토 대기 중인 모든 편지
- **Approve**: 편지를 승인하여 배송 대기열에 추가
- **Reject**: 부적절한 편지 거부 (사유 입력 필요)

#### 편지 필터링 기준
✅ **승인 가능**:
- 500자 이상
- 진심 어린 응원 메시지
- 적절한 언어 사용
- "God bless you", "Pray for you" 같은 종교적 축복

❌ **거부 사유**:
- 정치적 내용
- 군사 정보 요청
- 성적 내용
- 금전 요구
- 욕설이나 비속어
- 개인 연락처 정보

### 2. Users 관리 (`/admin` > Users 탭)

#### 사용자 목록
- 전체 사용자 조회
- 이메일, 가입일, 작성 편지 수 확인
- 활동 내역 추적

#### 사용자 관리
- 문제 사용자 식별
- 활동 패턴 모니터링

### 3. Statistics (`/admin` > Stats 탭)

#### 주요 지표
- **Total Users**: 전체 가입자 수
- **Total Letters**: 제출된 총 편지 수
- **Approved Letters**: 승인된 편지 수
- **Pending Letters**: 검토 대기 중인 편지 수
- **Rejected Letters**: 거부된 편지 수
- **Current Batch Progress**: 현재 배치 진행률 (1,000통 기준)

### 4. Settings (`/admin/settings`)

#### Site Settings
- **Total Delivered Letters**: 총 전달된 편지 수 (공개 통계)
- **Current Batch Count**: 현재 배치의 승인된 편지 수
- **Batch Goal**: 배치 목표 (기본 1,000)

#### Batch 배송 프로세스
1. 현재 배치가 1,000통 도달
2. "Mark Current Batch as Delivered" 버튼 클릭
3. 총 전달 편지 수에 1,000 추가
4. 현재 배치 카운트 0으로 리셋
5. 새 배치 시작

#### Administrator Management
- **현재 관리자 목록**: 모든 관리자 보기
- **Add New Admin**: User ID로 새 관리자 추가
  - User ID는 Users 탭에서 확인 가능
  - 신뢰할 수 있는 사람만 추가

## 일일 관리 루틴

### 아침 (9:00 AM)
1. 대시보드 접속
2. Pending 편지 수 확인
3. 전날 제출된 편지 검토 시작

### 점심 (12:00 PM)
4. 추가 제출된 편지 확인
5. 통계 업데이트 확인

### 저녁 (6:00 PM)
6. 마지막 편지 검토
7. 배치 진행률 확인
8. 1,000통 달성 시 배송 처리

## 배치 배송 가이드

### 배송 준비 (1,000통 달성 시)

1. **확인**:
   - Settings > Current Batch Count가 1,000 이상인지 확인
   
2. **인쇄 준비**:
   - 승인된 편지 1,000통 다운로드 (기능 추가 필요 시)
   - 인쇄 업체 연락
   
3. **배송 처리**:
   - "Mark Current Batch as Delivered" 클릭
   - 배송 날짜 기록
   - 부대 정보 기록

4. **다음 배치 시작**:
   - 새 배치 카운트 0부터 시작
   - 홈페이지 통계 자동 업데이트 확인

## 트러블슈팅

### 편지 승인이 안 될 때
- 데이터베이스 연결 확인
- RLS 정책 확인
- 브라우저 콘솔 에러 확인

### 통계가 업데이트 안 될 때
- Settings 페이지에서 수동으로 업데이트
- 데이터베이스에서 직접 확인
- 캐시 새로고침 (Ctrl+Shift+R)

### 사용자가 로그인 못 할 때
- 이메일 확인 상태 체크
- 비밀번호 재설정 요청
- Supabase Auth 대시보드 확인

## 보안 주의사항

1. **비밀번호 관리**
   - 정기적으로 비밀번호 변경
   - 강력한 비밀번호 사용
   - 타인과 공유 금지

2. **권한 관리**
   - 관리자 추가 시 신중하게 결정
   - 퇴사자 관리자 권한 즉시 제거
   - 정기적으로 관리자 목록 검토

3. **데이터 보호**
   - 사용자 정보 외부 유출 금지
   - 편지 내용 비밀 유지
   - GDPR/CCPA 준수

## 긴급 연락처

- Supabase 지원: support@supabase.io
- Vercel 지원: support@vercel.com
- 기술 문제: [GitHub Issues]

---

**관리자 비밀번호 변경 권장**: 첫 로그인 후 즉시 변경하세요.

**다음 관리자 교육**: 이 가이드를 새 관리자에게 공유하세요.
